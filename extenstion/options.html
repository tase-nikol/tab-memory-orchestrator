<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tab Memory Orchestrator — Options</title>
    <style>
      body { font-family: system-ui, -apple-system, sans-serif; margin: 24px; max-width: 820px; }
      label { display:block; margin-top: 14px; font-weight: 600; }
      input[type="number"] { width: 120px; padding: 6px; }
      textarea { width: 100%; height: 140px; padding: 8px; }
      .row { display: flex; gap: 16px; flex-wrap: wrap; }
      .card { border: 1px solid #ddd; border-radius: 10px; padding: 16px; margin-top: 16px; }
      .hint { color: #555; font-size: 13px; margin-top: 6px; }
      button { margin-top: 16px; padding: 10px 14px; border-radius: 10px; border: 1px solid #ddd; background: white; cursor: pointer; }
      #status { margin-left: 10px; color: #0a7; font-weight: 600; }
    </style>
  </head>
  <body>
    <h1>Tab Memory Orchestrator</h1>
    <p class="hint">Settings are local-only. The native host runs on your machine and provides system signals (RAM/CPU/battery).</p>

    <div class="card">
      <h2>Policy</h2>

      <div class="row">
        <div>
          <label>TTL (minutes)</label>
          <input id="ttlMinutes" type="number" min="1" step="1" />
          <div class="hint">Tabs must be inactive for at least this long before they can be discarded.</div>
        </div>

        <div>
          <label>Cooldown (seconds)</label>
          <input id="cooldownSeconds" type="number" min="10" step="5" />
          <div class="hint">Minimum time between discards when under pressure.</div>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Free RAM threshold (%)</label>
          <input id="freeRamPercent" type="number" min="1" max="50" step="1" />
          <div class="hint">Trigger if free RAM drops below this percentage of total RAM.</div>
        </div>

        <div>
          <label>Used RAM threshold (%)</label>
          <input id="usedRamPercent" type="number" min="50" max="99" step="1" />
          <div class="hint">Trigger if used RAM exceeds this percentage of total RAM.</div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Protected domains</h2>
      <label>Never discard these (one per line)</label>
      <textarea id="protectedDomains" placeholder="mail.google.com&#10;slack.com"></textarea>
      <div class="hint">Use hostnames only (no https://). Subdomains are separate unless you list them too.</div>
    </div>

    <div class="card">
      <h2>Focus Mode</h2>
    
      <div class="row">
        <div>
          <label>Enable Focus Mode</label>
          <input id="focusEnabled" type="checkbox" />
          <div class="hint">Creates a “working bubble” and discards tabs outside it sooner.</div>
        </div>
    
        <div>
          <label>Run proactively</label>
          <input id="focusProactive" type="checkbox" />
          <div class="hint">If enabled, Focus Mode may discard out-of-cluster tabs even without memory pressure.</div>
        </div>
      </div>
    
      <div class="row">
        <div>
          <label>Cluster recency window (minutes)</label>
          <input id="focusClusterMinutes" type="number" min="1" step="1" />
          <div class="hint">Tabs active within this window are considered “in cluster”.</div>
        </div>
    
        <div>
          <label>Out-of-cluster TTL (minutes)</label>
          <input id="focusOutTtlMinutes" type="number" min="1" step="1" />
          <div class="hint">Tabs outside cluster become eligible after this inactivity time.</div>
        </div>
      </div>
    </div>
    

    <button id="saveBtn">Save</button><span id="status"></span>

    <script src="options.js"></script>
  </body>
</html>